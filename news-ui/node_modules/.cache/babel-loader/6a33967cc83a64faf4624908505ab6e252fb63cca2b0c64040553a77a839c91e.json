{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'NewsUI',\n  props: ['apiKey'],\n  data: () => {\n    return {\n      apiUrl: '',\n      isBusy: false,\n      showloader: false,\n      currentPage: 1,\n      totalResults: 0,\n      maxPerPage: 20,\n      searchword: '',\n      articles: [],\n      country: 'pk'\n    };\n  },\n  computed: {\n    pageCount() {\n      return Math.ceil(this.totalResults / this.maxPerPage);\n    }\n  },\n  methods: {\n    navTo(url) {\n      window.open(url);\n    },\n    resetData() {\n      this.currentPage = 1;\n      this.articles = [];\n    },\n    fetchSearchNews() {\n      if (this.searchword !== '') {\n        this.apiUrl = 'https://newsapi.org/v2/everything?q=' + this.searchword + '&pageSize=' + this.maxPerPage + '&apiKey=' + 'd4afb27417e04520a602c3ad49883997';\n        this.isBusy = true;\n        this.resetData();\n        this.fetchData();\n      } else {\n        this.fetchTopNews();\n      }\n    },\n    fetchTopNews() {\n      this.apiUrl = 'https://newsapi.org/v2/top-headlines?country=' + this.country + '&pageSize=' + this.maxPerPage + '&apiKey=' + 'd4afb27417e04520a602c3ad49883997';\n      this.isBusy = true;\n      this.searchword = '';\n      this.resetData();\n      this.fetchData();\n    },\n    fetchData() {\n      let req = new Request(this.apiUrl + '&page=' + this.currentPage);\n      fetch(req).then(resp => resp.json()).then(data => {\n        this.totalResults = data.totalResults;\n        data.articles.forEach(element => {\n          this.articles.push(element);\n        });\n        this.isBusy = false;\n        this.showloader = false;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    scrollTrigger() {\n      const observer = new IntersectionObserver(entries => {\n        entries.forEach(entry => {\n          if (entry.intersectionRatio > 0 && this.currentPage < this.pageCount) {\n            this.showloader = true;\n            this.currentPage += 1;\n            this.fetchData();\n          }\n        });\n      });\n      observer.observe(this.$refs.infinitescrolltrigger);\n    }\n  },\n  created() {\n    this.fetchTopNews();\n  },\n  mounted() {\n    this.scrollTrigger();\n  }\n};","map":{"version":3,"names":["name","props","data","apiUrl","isBusy","showloader","currentPage","totalResults","maxPerPage","searchword","articles","country","computed","pageCount","Math","ceil","methods","navTo","url","window","open","resetData","fetchSearchNews","fetchData","fetchTopNews","req","Request","fetch","then","resp","json","forEach","element","push","catch","error","console","log","scrollTrigger","observer","IntersectionObserver","entries","entry","intersectionRatio","observe","$refs","infinitescrolltrigger","created","mounted"],"sources":["C:\\Users\\fatima.noor\\Desktop\\NewsApi\\news-ui\\src\\App.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"searchbar\">\n      <form @submit.prevent=\"fetchSearchNews\">\n        <input type=\"text\" placeholder=\"search...\" v-model=\"searchword\">\n      </form>\n      <div class=\"search-icons\">\n        <i v-if=\"!isBusy\" class=\"fas fa-search\" @click=\"fetchSearchNews\"></i>\n        <i v-else class=\"fas fa-spinner fa-spin\"></i>\n        <i class=\"fas fa-times\" @click=\"fetchTopNews\"></i>\n      </div>\n    </div>\n    <div class=\"result-list\">\n      <article v-for=\"(article, index) in articles\" :key=\"index\" @click=\"navTo(article.url)\">\n        <header>\n          <img v-if=\"article.urlToImage\" :src=\"article.urlToImage\" alt=\"\">\n          <i v-else class=\"fas fa-image\"></i>\n        </header>\n        <section v-html=\"article.title\"></section>\n        <footer>\n          <i class=\"fas fa-chevron-right\"></i>\n        </footer>\n      </article>\n    </div>\n    <div ref=\"infinitescrolltrigger\" id=\"scroll-trigger\">\n      <i v-if=\"showloader\" class=\"fas fa-spinner fa-spin\"></i>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'NewsUI',\n    props: [\n      'apiKey'\n    ],\n    data: () => {\n      return {\n        apiUrl: '',\n        isBusy: false,\n        showloader: false,\n        currentPage: 1,\n        totalResults: 0,\n        maxPerPage: 20,\n        searchword: '',\n        articles: [],\n        country: 'pk'\n      }\n    },\n    computed: {\n      pageCount() {\n        return Math.ceil(this.totalResults/this.maxPerPage);\n      }\n    },\n    methods: {\n      navTo(url) {\n        window.open(url);\n      },\n      resetData() {\n        this.currentPage = 1;\n        this.articles = [];\n      },\n      fetchSearchNews() {\n        if(this.searchword !== '')\n        {\n          this.apiUrl = 'https://newsapi.org/v2/everything?q=' + this.searchword +\n                        '&pageSize=' + this.maxPerPage +\n                        '&apiKey=' + 'd4afb27417e04520a602c3ad49883997';\n          this.isBusy = true;\n\n          this.resetData();\n          this.fetchData();\n        }\n        else {\n          this.fetchTopNews();\n        }\n      },\n      fetchTopNews() {\n        this.apiUrl = 'https://newsapi.org/v2/top-headlines?country=' + this.country +\n                        '&pageSize=' + this.maxPerPage +\n                        '&apiKey=' + 'd4afb27417e04520a602c3ad49883997';\n        this.isBusy = true;\n        this.searchword = '';\n        \n        this.resetData();\n        this.fetchData();\n      },\n      fetchData() {\n        let req  = new Request(this.apiUrl + '&page=' + this.currentPage);\n        fetch(req)\n          .then((resp) => resp.json())\n          .then((data) => {\n            this.totalResults = data.totalResults;\n            data.articles.forEach(element => {\n              this.articles.push(element);\n            });\n            this.isBusy = false;\n            this.showloader = false;\n          })\n          .catch((error) => {\n            console.log(error);\n          })\n      },\n      scrollTrigger() {\n        const observer = new IntersectionObserver((entries) => {\n          entries.forEach(entry => {\n            if(entry.intersectionRatio > 0 && this.currentPage < this.pageCount) {\n              this.showloader = true;\n              this.currentPage += 1;\n              this.fetchData();\n            }\n          });\n        });\n\n        observer.observe(this.$refs.infinitescrolltrigger);\n      }\n    },\n    created() {\n      this.fetchTopNews();\n    },\n    mounted() {\n      this.scrollTrigger();\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .container {\n    position: relative;\n\n    .searchbar {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      width: 100%;\n      height: 60px;\n      font-size: 1.6rem;\n\n      input {\n        padding: 0 100px 0 20px;\n        margin: 0;\n        width: calc(100% - 120px);\n        height: 60px;\n        border: none;\n        font-size: 2rem;\n        color: #fff;\n        background-color: #222;\n\n        &:focus {\n          outline: none;\n        }\n      }\n\n      .search-icons {\n        position: absolute;\n        right: 20px;\n        top: 20px;\n        color: #fff;\n\n        i {\n          margin-left: 15px;\n          cursor: pointer;\n        }\n      }\n    }\n\n    .result-list {\n      padding-top: 60px;\n    }\n\n    article {\n      display: grid;\n      grid-template-columns: 200px auto 40px;\n      grid-template-rows: 100px;\n      border-bottom: 1px solid #ccc;\n      overflow: hidden;\n      cursor: pointer;\n\n      header {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        overflow: hidden;\n\n        img {\n          max-width: 100%;\n          height: auto;\n        }\n\n        i {\n          font-size: 2rem;\n        }\n      }\n\n      section {\n        margin: 0;\n        padding: 10px;\n        height: 100px;\n      }\n\n      footer {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-size: 1.6rem;\n        color: #888;\n      }\n    }\n\n    #scroll-trigger {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 100%;\n      height: 100px;\n      font-size: 1.6rem;\n    }\n  }\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}